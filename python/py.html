<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/sword_at_offer/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/sword_at_offer/static/css/tango.css">
    <link rel="shortcut icon" href="/sword_at_offer/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/sword_at_offer/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>python基础知识 - 剑指Offer</title>
    <meta name="keywords" content="algorithm，python"/>
    <meta name="description" content="for python and algorithm"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/sword_at_offer/">Home</a>&nbsp;&#187;&nbsp;<a href="/sword_at_offer/#python">python</a>&nbsp;&#187;&nbsp;python基础知识
    <span class="updated">Page Updated&nbsp;
      2018-05-30 00:00
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">python基础知识</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#python">python基础</a><ul>
<li><a href="#_1">数据类型</a><ul>
<li><a href="#numbers">Numbers 数字</a></li>
<li><a href="#string">String 字符串</a></li>
<li><a href="#list">List 列表</a><ul>
<li><a href="#_2">基础操作</a></li>
<li><a href="#_3">增</a></li>
<li><a href="#_4">删</a></li>
<li><a href="#_5">查找</a></li>
<li><a href="#_6">遍历（三种方法）</a></li>
</ul>
</li>
<li><a href="#tuple">Tuple 元组</a></li>
<li><a href="#dictionary">Dictionary 字典</a><ul>
<li><a href="#dict">dict遍历</a></li>
<li><a href="#dict_1">dict取值注意点</a></li>
</ul>
</li>
<li><a href="#_7">其它类型</a><ul>
<li><a href="#false">False的情况</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_8">条件语句</a></li>
<li><a href="#for-while">for, while</a></li>
<li><a href="#innot-in">成员运算符(in,not in)</a></li>
<li><a href="#andornot">逻辑运算符(and,or,not)</a></li>
<li><a href="#class">类 Class</a><ul>
<li><a href="#_9">实例化对象</a></li>
<li><a href="#_10">访问属性</a></li>
<li><a href="#python-">python对象销毁(垃圾回收-引用计数)</a></li>
<li><a href="#self">self代表类的实例，而非类</a></li>
<li><a href="#propertyclassmethodstaticmethod">类@property,@classmethod,staticmethod</a><ul>
<li><a href="#property">@property</a></li>
<li><a href="#classmethod-staticmethod">@classmethod &amp; @staticmethod</a><ul>
<li><a href="#python_1">python单例模式</a></li>
<li><a href="#classmethod">classmethod 使用场景之一</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#__metaclass_">类的__metaclass_</a><ul>
<li><a href="#new-__init__">new 与 __init__的区别</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_11">类继承</a></li>
<li><a href="#_12"></a></li>
</ul>
</li>
</ul>
</div>
<h1 id="python">python基础</h1>
<h2 id="_1">数据类型</h2>
<p>Python的<code>inspect</code>模块包含了大量的与反射、元数据相关的工具函数</p>
<div class="hlcode"><pre><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">isfunction</span>

  <span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="s">&quot;aa&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span>
  <span class="k">print</span> <span class="nb">type</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span>
  <span class="k">print</span> <span class="nb">type</span><span class="p">({</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span> <span class="o">==</span> <span class="nb">dict</span>
  <span class="k">print</span> <span class="nb">type</span><span class="p">((</span><span class="mi">1</span><span class="p">,))</span> <span class="o">==</span> <span class="nb">tuple</span>
  <span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="mf">1.23</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span>
  <span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span>
  <span class="n">a</span> <span class="o">=</span> <span class="bp">None</span>
  <span class="k">print</span> <span class="n">a</span> <span class="o">==</span> <span class="bp">None</span>
  <span class="k">print</span> <span class="n">isfunction</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span>
</pre></div>


<h3 id="numbers">Numbers 数字</h3>
<div class="hlcode"><pre><span class="kt">int</span><span class="p">,</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">float</span><span class="p">,</span> <span class="kt">double</span>
</pre></div>


<h3 id="string">String 字符串</h3>
<p>读取顺序</p>
<div class="hlcode"><pre><span class="o">*</span> <span class="err">从左到右索引默认</span><span class="mi">0</span><span class="err">开始的，最大范围是字符串长度少</span><span class="mi">1</span>

<span class="o">*</span> <span class="err">从右到左索引默认</span><span class="o">-</span><span class="mi">1</span><span class="err">开始的，最大范围是字符串开头</span>
</pre></div>


<p>转义字符用反斜杠 <code>\</code></p>
<p>操作符 &amp; 格式化</p>
<div class="hlcode"><pre><span class="o">+</span>
<span class="o">*</span>
<span class="p">[]</span>
<span class="p">[</span><span class="o">:</span><span class="p">]</span>
<span class="n">in</span>
<span class="n">not</span> <span class="n">in</span>
<span class="n">r</span><span class="o">/</span><span class="n">R</span>
<span class="o">%</span>   <span class="c1">// 格式化</span>
</pre></div>


<p>常用方法</p>
<div class="hlcode"><pre><span class="n">string</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">beg</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="p">))</span>

<span class="n">string</span><span class="o">.</span><span class="n">format</span><span class="p">()</span>

<span class="n">string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">str1</span><span class="p">,</span> <span class="n">str2</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="n">string</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">str1</span><span class="p">))</span>

<span class="n">string</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">beg</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="p">))</span>
</pre></div>


<p>python三引号```允许一个字符串跨多行，字符串中可以包含换行符、制表符以及其他特殊字符。</p>
<h3 id="list">List 列表</h3>
<p>用<code>[]</code>表示</p>
<h4 id="_2">基础操作</h4>
<div class="hlcode"><pre><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="nb">max</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="nb">min</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="nb">list</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="nb">list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="nb">cmp</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>


<h4 id="_3">增</h4>
<div class="hlcode"><pre><span class="nb">list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="nb">list</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</pre></div>


<h4 id="_4">删</h4>
<div class="hlcode"><pre><span class="nb">list</span><span class="o">.</span><span class="n">pop</span><span class="p">([</span><span class="n">index</span><span class="o">=-</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</pre></div>


<h4 id="_5">查找</h4>
<div class="hlcode"><pre><span class="nb">list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="c"># 统计某个元素在列表中出现的次数</span>
<span class="nb">list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="c"># 读取列表中第三个元素</span>
<span class="nb">list</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="c"># 读取列表中倒数第二个元素</span>
<span class="nb">list</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="c"># 从第二个元素开始截取列表</span>
<span class="nb">list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="c"># 从列表中找出某个值第一个匹配项的索引位置</span>
</pre></div>


<h4 id="_6">遍历（三种方法）</h4>
<div class="hlcode"><pre><span class="c"># -*- coding:utf-8 -*-</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">li</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>  <span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

    <span class="k">print</span> <span class="s">&quot;===&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">li</span><span class="p">)):</span>
        <span class="k">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">li</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">print</span> <span class="s">&quot;===&quot;</span>
    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">li</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">li</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="n">val</span>

    <span class="k">print</span> <span class="s">&quot;===&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">li</span><span class="p">):</span>
        <span class="k">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span>

    <span class="k">print</span> <span class="s">&quot;===&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">li</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span>
</pre></div>


<h3 id="tuple">Tuple 元组</h3>
<h3 id="dictionary">Dictionary 字典</h3>
<div class="hlcode"><pre><span class="err">用```</span><span class="p">{}</span><span class="err">```表示</span><span class="p">,</span> <span class="err">```</span><span class="n">key</span><span class="o">:</span><span class="n">value</span><span class="err">```</span><span class="p">,</span> <span class="err">通过</span><span class="n">key</span><span class="err">来读取</span><span class="p">,</span><span class="err">而非偏移</span>
</pre></div>


<h4 id="dict">dict遍历</h4>
<div class="hlcode"><pre><span class="c"># -*- coding:utf-8 -*-</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="n">di</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">&quot;b&quot;</span><span class="p">:</span> <span class="s">&quot;time&quot;</span><span class="p">,</span>
        <span class="s">&quot;c&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">di</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">di</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">di</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>

    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">di</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>


<h4 id="dict_1">dict取值注意点</h4>
<div class="hlcode"><pre><span class="c"># -*- coding:utf-8 -*-</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="n">di</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">&quot;b&quot;</span><span class="p">:</span> <span class="s">&quot;time&quot;</span><span class="p">,</span>
        <span class="s">&quot;c&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="p">}</span>

    <span class="c"># print(di[&quot;d&quot;]) # 报错</span>

    <span class="c"># 先判断 再取</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;a&quot;</span> <span class="ow">in</span> <span class="n">di</span><span class="p">)</span>  <span class="c"># True</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;d&quot;</span> <span class="ow">in</span> <span class="n">di</span><span class="p">)</span>  <span class="c"># False</span>
    <span class="k">print</span><span class="p">(</span><span class="mi">1</span> <span class="ow">in</span> <span class="n">di</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>  <span class="c"># True</span>

    <span class="k">if</span> <span class="s">&quot;a&quot;</span> <span class="ow">in</span> <span class="n">di</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="n">di</span><span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">])</span>

    <span class="c"># depressed</span>
    <span class="k">if</span> <span class="n">di</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">di</span><span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">])</span>

    <span class="c"># get方法，取不到，取默认值</span>
    <span class="k">print</span><span class="p">(</span><span class="n">di</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="s">&quot;empty&quot;</span><span class="p">))</span>
</pre></div>


<h3 id="_7">其它类型</h3>
<div class="hlcode"><pre><span class="n">True</span><span class="err">，</span><span class="n">False</span><span class="err">，</span><span class="n">None</span>
</pre></div>


<h4 id="false">False的情况</h4>
<ol>
<li>False</li>
<li>None</li>
<li>所有值为零的数<ul>
<li>0（整数）</li>
<li>0.0（浮点数）</li>
<li>0L （长整数）</li>
<li>0.0+0.0j （复数）</li>
</ul>
</li>
<li>“”（空字符串）</li>
<li>[] （空列表）</li>
<li>() （空元组）</li>
<li>{} ｛空字典｝</li>
</ol>
<h2 id="_8">条件语句</h2>
<ul>
<li>注意条件后面的冒号<code>:</code>，else后面的冒号<code>:</code></li>
</ul>
<div class="hlcode"><pre><span class="k">if</span> <span class="err">判断条件：</span>
    <span class="err">执行语句……</span>
<span class="k">else</span><span class="err">：</span>
    <span class="err">执行语句……</span>
</pre></div>


<div class="hlcode"><pre><span class="k">if</span> <span class="err">判断条件</span><span class="mi">1</span><span class="p">:</span>
    <span class="err">执行语句</span><span class="mi">1</span><span class="err">……</span>
<span class="k">elif</span> <span class="err">判断条件</span><span class="mi">2</span><span class="p">:</span>
    <span class="err">执行语句</span><span class="mi">2</span><span class="err">……</span>
<span class="k">elif</span> <span class="err">判断条件</span><span class="mi">3</span><span class="p">:</span>
    <span class="err">执行语句</span><span class="mi">3</span><span class="err">……</span>
<span class="k">else</span><span class="p">:</span>
    <span class="err">执行语句</span><span class="mi">4</span><span class="err">……</span>
</pre></div>


<h2 id="for-while">for, while</h2>
<table>
<thead>
<tr>
<th>控制语句</th>
<th align="left">描述</th>
<th align="left"></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>break</td>
<td align="left">在语句块执行过程中终止循环，并且跳出整个循环</td>
<td align="left"></td>
<td></td>
</tr>
<tr>
<td>continue</td>
<td align="left">在语句块执行过程中终止当前循环，跳出该次循环，执行下一次循环。</td>
<td align="left"></td>
<td></td>
</tr>
<tr>
<td>pass</td>
<td align="left">pass是空语句，是为了保持程序结构的完整性。</td>
<td align="left"></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>注意冒号<code>:</code>不要漏掉</li>
</ul>
<p>examples :</p>
<div class="hlcode"><pre><span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="s">&#39;Python&#39;</span><span class="p">:</span>
   <span class="k">print</span> <span class="s">&#39;当前字母 :&#39;</span><span class="p">,</span> <span class="n">letter</span>

<span class="n">fruits</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;banana&#39;</span><span class="p">,</span> <span class="s">&#39;apple&#39;</span><span class="p">,</span>  <span class="s">&#39;mango&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="n">fruits</span><span class="p">:</span>
   <span class="k">print</span> <span class="s">&#39;当前水果 :&#39;</span><span class="p">,</span> <span class="n">fruit</span>
</pre></div>


<div class="hlcode"><pre><span class="n">fruits</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;banana&#39;</span><span class="p">,</span> <span class="s">&#39;apple&#39;</span><span class="p">,</span>  <span class="s">&#39;mango&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fruits</span><span class="p">)):</span>
   <span class="k">print</span> <span class="s">&#39;当前水果 :&#39;</span><span class="p">,</span> <span class="n">fruits</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</pre></div>


<div class="hlcode"><pre><span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">):</span>  <span class="c"># 迭代 10 到 20 之间的数字</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">num</span><span class="p">):</span> <span class="c"># 根据因子迭代</span>
      <span class="k">if</span> <span class="n">num</span><span class="o">%</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>      <span class="c"># 确定第一个因子</span>
         <span class="n">j</span><span class="o">=</span><span class="n">num</span><span class="o">/</span><span class="n">i</span>          <span class="c"># 计算第二个因子</span>
         <span class="k">print</span> <span class="s">&#39;</span><span class="si">%d</span><span class="s"> 等于 </span><span class="si">%d</span><span class="s"> * </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">num</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
         <span class="k">break</span>            <span class="c"># 跳出当前循环</span>
   <span class="k">else</span><span class="p">:</span>                  <span class="c"># 循环的 else 部分</span>
      <span class="k">print</span> <span class="n">num</span><span class="p">,</span> <span class="s">&#39;是一个质数&#39;</span>
</pre></div>


<div class="hlcode"><pre><span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">):</span>
   <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span>
   <span class="k">while</span><span class="p">(</span><span class="n">j</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="n">j</span><span class="p">)):</span>
      <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="n">j</span><span class="p">):</span> <span class="k">break</span>
      <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">&gt;</span> <span class="n">i</span><span class="o">/</span><span class="n">j</span><span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="n">i</span><span class="p">,</span> <span class="s">&quot; 是素数&quot;</span>
   <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>


<h2 id="innot-in">成员运算符(in,not in)</h2>
<div class="hlcode"><pre><span class="ow">in</span>
<span class="ow">not</span> <span class="ow">in</span>
</pre></div>


<p>字符串，列表或元组等，<code>x in y</code>: x在y序列中, 如果x在y序列中返回<code>True</code></p>
<h2 id="andornot">逻辑运算符(and,or,not)</h2>
<div class="hlcode"><pre><span class="ow">and</span>
<span class="ow">or</span>
<span class="ow">not</span>
</pre></div>


<p>假设变量 a 为 10, b为 20:</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>逻辑表达式</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>and</td>
<td>x and y</td>
<td>布尔"与" - 如果 x 为 False，x and y 返回 False，否则它返回 y 的计算值。</td>
<td>(a and b) 返回 20。</td>
</tr>
<tr>
<td>or</td>
<td>x or y</td>
<td>布尔"或" - 如果 x 是非 0，它返回 x 的值，否则它返回 y 的计算值。</td>
<td>(a or b) 返回 10。</td>
</tr>
<tr>
<td>not</td>
<td>not x</td>
<td>布尔"非" - 如果 x 为 True，返回 False 。如果 x 为 False，它返回 True。</td>
<td>not(a and b) 返回 False</td>
</tr>
</tbody>
</table>
<p>有个dict获取<code>or</code>的问题，<strong>犯过错误</strong></p>
<div class="hlcode"><pre><span class="n">dic</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s">&quot;names&quot;</span><span class="p">:</span> <span class="bp">None</span>
<span class="p">}</span>

<span class="k">if</span> <span class="s">&quot;zhang&quot;</span> <span class="ow">in</span> <span class="n">dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;names&#39;</span><span class="p">,</span> <span class="p">[]):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;yes&quot;</span><span class="p">)</span>
</pre></div>


<div class="hlcode"><pre>Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;/Users/mubi/PycharmProjects/py_algorithm/test2.py&quot;</span>, line 12, in &lt;module&gt;
    <span class="k">if</span> <span class="s2">&quot;zhang&quot;</span> in dic.get<span class="o">(</span><span class="s1">&#39;names&#39;</span>, <span class="o">[])</span>:
TypeError: argument of <span class="nb">type</span> <span class="s1">&#39;NoneType&#39;</span> is not iterable

Process finished with <span class="nb">exit </span>code 1
</pre></div>


<p>即<code>xxx in None</code>会抛异常， <code>dic.get('names', [])</code> 会返回<code>None</code>, 而<code>dic.get('names2', []):</code>会返回<code>[]</code>, 因为<code>names2</code>没有，而非<code>None</code></p>
<h2 id="class">类 Class</h2>
<p>使用 class 语句来创建一个新类，class 之后为类的名称并以冒号结尾，简单的类例子如下：</p>
<div class="hlcode"><pre><span class="c">#!/usr/bin/python</span>
<span class="c"># -*- coding: UTF-8 -*-</span>

<span class="k">class</span> <span class="nc">Employee</span><span class="p">:</span>
   <span class="s">&#39;所有员工的基类&#39;</span>
   <span class="n">empCount</span> <span class="o">=</span> <span class="mi">0</span>

   <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">salary</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">salary</span> <span class="o">=</span> <span class="n">salary</span>
      <span class="n">Employee</span><span class="o">.</span><span class="n">empCount</span> <span class="o">+=</span> <span class="mi">1</span>

   <span class="k">def</span> <span class="nf">displayCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">print</span> <span class="s">&quot;Total Employee </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">Employee</span><span class="o">.</span><span class="n">empCount</span>

   <span class="k">def</span> <span class="nf">displayEmployee</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">print</span> <span class="s">&quot;Name : &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>  <span class="s">&quot;, Salary: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">salary</span>
</pre></div>


<h3 id="_9">实例化对象</h3>
<div class="hlcode"><pre><span class="c"># 创建 Employee 类的第一个对象</span>
<span class="n">emp1</span> <span class="o">=</span> <span class="n">Employee</span><span class="p">(</span><span class="s">&quot;Zara&quot;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
<span class="c"># 创建 Employee 类的第二个对象</span>
<span class="n">emp2</span> <span class="o">=</span> <span class="n">Employee</span><span class="p">(</span><span class="s">&quot;Manni&quot;</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
</pre></div>


<h3 id="_10">访问属性</h3>
<p>使用点号 . 来访问对象的属性。使用如下类的名称访问类变量:</p>
<div class="hlcode"><pre><span class="n">emp1</span><span class="o">.</span><span class="n">displayEmployee</span><span class="p">()</span>
<span class="n">emp2</span><span class="o">.</span><span class="n">displayEmployee</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;Total Employee </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">Employee</span><span class="o">.</span><span class="n">empCount</span>
</pre></div>


<h3 id="python-">python对象销毁(垃圾回收-引用计数)</h3>
<p>Python 使用了引用计数这一简单技术来跟踪和回收垃圾</p>
<div class="hlcode"><pre><span class="n">a</span> <span class="o">=</span> <span class="mi">40</span>      <span class="c"># 创建对象  &lt;40&gt;</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>       <span class="c"># 增加引用， &lt;40&gt; 的计数</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="p">]</span>     <span class="c"># 增加引用.  &lt;40&gt; 的计数</span>

<span class="k">del</span> <span class="n">a</span>       <span class="c"># 减少引用 &lt;40&gt; 的计数</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">100</span>     <span class="c"># 减少引用 &lt;40&gt; 的计数</span>
<span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>   <span class="c"># 减少引用 &lt;40&gt; 的计数</span>
</pre></div>


<h3 id="self">self代表类的实例，而非类</h3>
<p>类的方法与普通的函数只有一个特别的区别——它们必须有一个额外的第一个参数名称, 按照惯例它的名称是 self。</p>
<h3 id="propertyclassmethodstaticmethod">类@property,@classmethod,staticmethod</h3>
<h4 id="property">@property</h4>
<p>装饰器（decorator）可以给函数动态加上功能,对于类的方法，装饰器一样起作用。Python内置的@property装饰器就是负责把一个方法变成属性调用的</p>
<div class="hlcode"><pre><span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">score</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__score</span> <span class="o">=</span> <span class="n">score</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__score</span>

    <span class="nd">@score.setter</span>
    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">score</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">score</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;invalid score&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__score</span> <span class="o">=</span> <span class="n">score</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">stu1</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s">&quot;sun&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
    <span class="n">stu1</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="mi">101</span>
</pre></div>


<h4 id="classmethod-staticmethod">@classmethod &amp; @staticmethod</h4>
<p><a href="https://blog.csdn.net/yxwb1253587469/article/details/52250719">详细参考</a></p>
<ol>
<li>classmethod：类方法</li>
<li>staticmethod：静态方法</li>
</ol>
<p>在python中，静态方法和类方法都是可以通过类对象和类对象实例访问。但是区别是：</p>
<ul>
<li>
<p>@classmethod 是一个函数修饰符，它表示接下来的是一个类方法，而对于平常我们见到的则叫做实例方法。 类方法的第一个参数cls，而实例方法的第一个参数是self，表示该类的一个实例。</p>
</li>
<li>
<p>普通对象方法至少需要一个self参数，代表类对象实例</p>
</li>
<li>
<p>类方法有类变量cls传入，从而可以用cls做一些相关的处理。并且有子类继承时，调用该类方法时，传入的类变量cls是子类，而非父类。 对于类方法，可以通过类来调用，就像C.f()，有点类似C＋＋中的静态方法, 也可以通过类的一个实例来调用，就像C().f()，这里C()，写成这样之后它就是类的一个实例了。</p>
</li>
<li>
<p>类方法有类变量cls传入，从而可以用cls做一些相关的处理。并且有子类继承时，调用该类方法时，传入的类变量cls是子类，而非父类。 对于类方法，可以通过类来调用，就像C.f()，有点类似C＋＋中的静态方法, 也可以通过类的一个实例来调用，就像C().f()，这里C()，写成这样之后它就是类的一个实例了。</p>
</li>
</ul>
<h5 id="python_1">python单例模式</h5>
<div class="hlcode"><pre><span class="c"># -*- coding:utf-8 -*-</span>


<span class="k">class</span> <span class="nc">SingleInstance</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Single Instance</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__instance</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">__instance</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">cls</span><span class="o">.</span><span class="n">__instance</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">__instance</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">s_func</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;static method&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="n">cls</span><span class="o">.</span><span class="n">s_func</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">SingleInstance</span><span class="p">()</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">SingleInstance</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

    <span class="n">a</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
    <span class="n">b</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
</pre></div>


<h5 id="classmethod">classmethod 使用场景之一</h5>
<p><a href="https://stackoverflow.com/questions/12179271/meaning-of-classmethod-and-staticmethod-for-beginner">参考Stackoverflow讲解</a></p>
<p>重构类的时候不必要修改构造函数，只需要额外添加你要处理的函数，然后使用装饰符 @classmethod 就可以了</p>
<div class="hlcode"><pre><span class="c"># -*- coding:utf-8 -*-</span>


<span class="k">class</span> <span class="nc">DateTest</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;时间类</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">day</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">month</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">year</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="n">day</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">month</span> <span class="o">=</span> <span class="n">month</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">year</span>

    <span class="k">def</span> <span class="nf">out_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;year :&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;month :&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;day :&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_date</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">string_date</span><span class="p">):</span>
        <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">string_date</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">))</span>
        <span class="c"># 返回新的类实例</span>
        <span class="k">return</span> <span class="n">cls</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">d1</span> <span class="o">=</span> <span class="n">DateTest</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">d1</span><span class="o">.</span><span class="n">out_date</span><span class="p">()</span>

    <span class="n">d2</span> <span class="o">=</span> <span class="n">DateTest</span><span class="o">.</span><span class="n">get_date</span><span class="p">(</span><span class="s">&quot;2018-9-1&quot;</span><span class="p">)</span>
    <span class="n">d2</span><span class="o">.</span><span class="n">out_date</span><span class="p">()</span>
</pre></div>


<p>@staticmethod 其实它跟@classmethod非常相似，只是它没有任何必需的参数。</p>
<p>假设我们要去检验一个日期的字符串是否有效。这个任务与Date类相关，但是又不需要Date实例对象，在这样的情况下@staticmethod就可以派上用场了。如下：</p>
<div class="hlcode"><pre><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">is_date_valid</span><span class="p">(</span><span class="n">date_as_string</span><span class="p">):</span>
    <span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">date_as_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">day</span> <span class="o">&lt;=</span> <span class="mi">31</span> <span class="ow">and</span> <span class="n">month</span> <span class="o">&lt;=</span> <span class="mi">12</span> <span class="ow">and</span> <span class="n">year</span> <span class="o">&lt;=</span> <span class="mi">3999</span>

<span class="c"># usage:</span>
<span class="n">is_date</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">is_date_valid</span><span class="p">(</span><span class="s">&#39;11-09-2012&#39;</span><span class="p">)</span>
</pre></div>


<h3 id="__metaclass_">类的__metaclass_</h3>
<div class="hlcode"><pre><span class="c"># -*- coding:utf-8 -*-</span>


<span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Summary of class here.</span>

<span class="sd">    Longer class information....</span>
<span class="sd">    Longer class information....</span>

<span class="sd">    Attributes:</span>
<span class="sd">        likes_spam: A boolean indicating if we like SPAM or not.</span>
<span class="sd">        eggs: An integer count of the eggs we have laid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">12345</span>

    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;test func</span>

<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;hello world&#39;</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">MyClass</span><span class="o">.</span><span class="n">__doc__</span><span class="p">)</span>      <span class="c"># 类的说明文档</span>
    <span class="k">print</span><span class="p">(</span><span class="n">MyClass</span><span class="o">.</span><span class="n">__module__</span><span class="p">)</span>   <span class="c"># 类来自的模块，看在那里使用</span>

    <span class="k">print</span><span class="p">(</span><span class="n">MyClass</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
    <span class="n">m</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">54321</span>
    <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>           <span class="c"># 将对象内的属性和值用字典的方式显示出来</span>

    <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">__class__</span><span class="p">)</span>          <span class="c"># 对象来源于哪个类</span>
    <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">f</span><span class="p">)</span>
</pre></div>


<h4 id="new-__init__"><strong>new</strong> 与 __init__的区别</h4>
<p>_init__是在类实例创建之后调用，而 __new__方法正是<strong>创建这个类实例的方法</strong>。</p>
<ol>
<li>
<p><strong>init</strong> 通常用于初始化一个新实例，控制这个初始化的过程，比如添加一些属性，做一些额外的操作，发生在类实例被创建完以后。它是实例级别的方法。</p>
</li>
<li>
<p><strong>new</strong> 通常用于控制生成一个新实例的过程。它是类级别的方法。</p>
</li>
</ol>
<p>__new__方法主要是当你继承一些不可变的class时(比如int, str, tuple)， 提供给你一个自定义这些类的实例化过程的途径。还有就是实现自定义的metaclass。</p>
<p>如下，int是不可变对象，通过继承int并重载__new__方法，实现一个永远都是正数的整数类型</p>
<div class="hlcode"><pre><span class="k">class</span> <span class="nc">PositiveInteger</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PositiveInteger</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">PositiveIntegerAbs</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">PositiveIntegerAbs</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">PositiveInteger</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="n">i</span> <span class="o">=</span> <span class="n">PositiveIntegerAbs</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>


<ul>
<li>单例</li>
</ul>
<div class="hlcode"><pre><span class="k">class</span> <span class="nc">Singleton</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="c"># 关键在于这，每一次实例化的时候，我们都只会返回这同一个instance对象</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="s">&#39;instance&#39;</span><span class="p">):</span>
            <span class="n">cls</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">Singleton</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">instance</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">obj1</span> <span class="o">=</span> <span class="n">Singleton</span><span class="p">()</span>
    <span class="n">obj2</span> <span class="o">=</span> <span class="n">Singleton</span><span class="p">()</span>

    <span class="n">obj1</span><span class="o">.</span><span class="n">attr1</span> <span class="o">=</span> <span class="s">&#39;value1&#39;</span>
    <span class="k">print</span><span class="p">(</span><span class="n">obj1</span><span class="o">.</span><span class="n">attr1</span><span class="p">,</span> <span class="n">obj2</span><span class="o">.</span><span class="n">attr1</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">obj1</span> <span class="ow">is</span> <span class="n">obj2</span><span class="p">)</span>     <span class="c"># True</span>
</pre></div>


<h2 id="_11">类继承</h2>
<p><a href="https://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001386820044406b227b3e751cc4d5190420d17a2dc6353000">参考</a></p>
<div class="hlcode"><pre><span class="c"># -*- coding:utf-8 -*-</span>


<span class="k">class</span> <span class="nc">Animal</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Animal is running...&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Cat</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">()</span>

    <span class="n">d</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>


<p>继承有什么好处？最大的好处是子类获得了父类的全部功能。由于Animial实现了run()方法，因此，Dog和Cat作为它的子类，什么事也没干，就自动拥有了run()方法：</p>
<p>继承的第二个好处需要我们对代码做一点改进。可以重写父类的方法</p>
<div class="hlcode"><pre><span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Dog is running...&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Cat</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Cat is running...&#39;</span><span class="p">)</span>
</pre></div>


<p>当子类和父类都存在相同的run()方法时，我们说，子类的run()覆盖了父类的run()，在代码运行的时候，总是会调用子类的run()。这样，我们就获得了继承的另一个好处：多态。</p>
<div class="hlcode"><pre><span class="c"># -*- coding:utf-8 -*-</span>


<span class="k">class</span> <span class="nc">Animal</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Animal is running...&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Dog is running...&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Cat</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Cat is running...&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">run_twice</span><span class="p">(</span><span class="n">animal</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    新增一个Animal的子类，不必对run_twice()做任何修改，</span>
<span class="sd">    实际上，任何依赖Animal作为参数的函数或者方法都可以不加修改地正常运行，原因就在于多态。</span>
<span class="sd">    :param animal: </span>
<span class="sd">    :return: </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">animal</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="n">animal</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="n">a</span> <span class="o">=</span> <span class="n">Animal</span><span class="p">()</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">()</span>

    <span class="n">run_twice</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">run_twice</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>


<p>对于一个变量，我们只需要知道它是Animal类型，无需确切地知道它的子类型，就可以放心地调用run()方法，而具体调用的run()方法是作用在Animal、Dog、Cat还是Tortoise对象上，由运行时该对象的确切类型决定，这就是多态真正的威力：调用方只管调用，不管细节，而当我们新增一种Animal的子类时，只要确保run()方法编写正确，不用管原来的代码是如何调用的。这就是著名的“开闭”原则：</p>
<ul>
<li>
<p>对扩展开放：允许新增Animal子类；</p>
</li>
<li>
<p>对修改封闭：不需要修改依赖Animal类型的run_twice()等函数。</p>
</li>
</ul>
<h2 id="_12"></h2>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 doctording.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-06-16 19:37:41</p>
      </span>
    </div>

    
    
  </body>
</html>
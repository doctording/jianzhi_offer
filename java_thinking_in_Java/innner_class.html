<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/sword_at_offer/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/sword_at_offer/static/css/tango.css">
    <link rel="shortcut icon" href="/sword_at_offer/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/sword_at_offer/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>《Java编程思想》第10章：内部类 - 剑指Offer</title>
    <meta name="keywords" content="algorithm，python"/>
    <meta name="description" content="for python and algorithm"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/sword_at_offer/">Home</a>&nbsp;&#187;&nbsp;<a href="/sword_at_offer/#java_thinking_in_Java">java_thinking_in_Java</a>&nbsp;&#187;&nbsp;《Java编程思想》第10章：内部类
    <span class="updated">Page Updated&nbsp;
      2019-02-13 00:00
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">《Java编程思想》第10章：内部类</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">概述</a><ul>
<li><a href="#_2">为什么需要内部类</a><ul>
<li><a href="#_3">一种隐藏和组织代码的模式</a></li>
<li><a href="#_4">匿名内部类</a></li>
<li><a href="#_5">闭包和回调</a><ul>
<li><a href="#_6">同步回调</a></li>
<li><a href="#_7">异步回调</a></li>
</ul>
</li>
<li><a href="#_8">事件驱动系统</a></li>
<li><a href="#_9">内部类标识符</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="_1">概述</h1>
<p>可以将一个类的定义放到另一类的定义的内部，这就是<code>内部类</code></p>
<h2 id="_2">为什么需要内部类</h2>
<p>一般来说，内部类继承自某个类或实现某个接口，内部类的代码操作创建它的外围类的对象。所以可以认为内部类提供了某种进入其外围类的窗口。</p>
<p>内部类必须要回答的一个问题是： 如果知识需要一个对接口的引用，为什么部通过外围类实现那个接口呢？答案是：“如果这能满足需求，那么句应该这样做。” 那么内部类实现一个接口和外围类实现这个接口有什么区别吗？答案是：后者不是总能享用到接口带来的方便，有时需要用到接口的实现。所有，使用内部类最吸引人的原因是：</p>
<div class="hlcode"><pre>每个内部类都能独立的继承自一个（接口的）实现，所以无论外围类是否已经继承了某个（接口的）实现，对内部类都没有影响
</pre></div>


<h3 id="_3">一种隐藏和组织代码的模式</h3>
<div class="hlcode"><pre><span class="kd">interface</span> <span class="nc">Contents</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">value</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">Destination</span> <span class="o">{</span>
    <span class="n">String</span> <span class="nf">readLabel</span><span class="o">();</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Goods</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">Content</span> <span class="kd">implements</span> <span class="n">Contents</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">11</span><span class="o">;</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">value</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">i</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">protected</span> <span class="kd">class</span> <span class="nc">GDestination</span> <span class="kd">implements</span> <span class="n">Destination</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">label</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nf">GDestination</span><span class="o">(</span><span class="n">String</span> <span class="n">whereTo</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">whereTo</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">readLabel</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">label</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">Destination</span> <span class="nf">dest</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">GDestination</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">Contents</span> <span class="nf">cont</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Content</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainTest</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Goods</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Goods</span><span class="o">();</span>
        <span class="n">Contents</span> <span class="n">c</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">cont</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
        <span class="n">Destination</span> <span class="n">d</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">dest</span><span class="o">(</span><span class="s">&quot;Beijing&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d</span><span class="o">.</span><span class="na">readLabel</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/* Output:</span>
<span class="cm">11</span>
<span class="cm">Beijing</span>
<span class="cm"> */</span><span class="c1">//:~</span>
</pre></div>


<h3 id="_4">匿名内部类</h3>
<p>匿名内部类没有构造器的行为（因为没有类名），但能够通过实例初始化，达到构造行为</p>
<div class="hlcode"><pre><span class="kd">interface</span> <span class="nc">Contents</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">value</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">Destination</span> <span class="o">{</span>
    <span class="n">String</span> <span class="nf">readLabel</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Destination2</span> <span class="o">{</span>
    <span class="n">Destination2</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Constructor s=&quot;</span> <span class="o">+</span> <span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">readLabel</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Goods3</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">Contents</span> <span class="nf">cont</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// 匿名内部类</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Contents</span><span class="o">()</span> <span class="o">{</span>
            <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">11</span><span class="o">;</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">int</span> <span class="nf">value</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">i</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Destination</span> <span class="nf">dest</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 匿名内部类使用参数，外围必须是final的</span>
        <span class="c1">// String dest 不是final 也ok(Java8) ?</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Destination</span><span class="o">(){</span>
            <span class="kd">private</span> <span class="n">String</span> <span class="n">label</span> <span class="o">=</span> <span class="n">s</span><span class="o">;</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="n">String</span> <span class="nf">readLabel</span><span class="o">(){</span>
                <span class="k">return</span> <span class="n">label</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Destination2</span> <span class="nf">dest2</span><span class="o">(</span><span class="n">String</span> <span class="n">dest</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Destination2</span><span class="o">(</span><span class="n">dest</span><span class="o">){</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="n">String</span> <span class="nf">readLabel</span><span class="o">(){</span>
                <span class="k">return</span> <span class="n">dest</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainTest</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Goods3</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Goods3</span><span class="o">();</span>
        <span class="n">Contents</span> <span class="n">c</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">cont</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
        <span class="n">Destination</span> <span class="n">d</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">dest</span><span class="o">(</span><span class="s">&quot;shanghai&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d</span><span class="o">.</span><span class="na">readLabel</span><span class="o">());</span>
        <span class="n">Destination2</span> <span class="n">d2</span> <span class="o">=</span> <span class="n">Goods3</span><span class="o">.</span><span class="na">dest2</span><span class="o">(</span><span class="s">&quot;beijing&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d2</span><span class="o">.</span><span class="na">readLabel</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/* Output:</span>
<span class="cm">11</span>
<span class="cm">shanghai</span>
<span class="cm">Constructor s=beijing</span>
<span class="cm">beijing</span>
<span class="cm"> */</span><span class="c1">//:~</span>
</pre></div>


<h3 id="_5">闭包和回调</h3>
<p><code>闭包</code>(closure)是一个可调用的对象，它记录了一些信息，这些信息用来创建它的作用域。通过这个定义，可以看出内部类是面向对象的闭包，因为它不仅包含外围类对象（创建内部类的作用域）的信息，还自动拥有一个指向此外围类对象的引用，在此作用域内，内部类有权操作所有的成员，包括private成员。</p>
<p><code>回调</code>(callback), 通过回调，对象能够携带一些信息，这些信息允许它在稍后的某个时刻调用初始的对象。</p>
<p>简单来说，就是我调用你的函数，你调用我的函数。正规一点的说法就是类A的a()函数调用类B的b()函数，当类B的b()函数的执行时又去调用类A里的函数。是一种双向的调用方式。一般情况下，回调分两种，分别是同步回调和异步回调。</p>
<h4 id="_6">同步回调</h4>
<p>一种双向调用模式，被调用方在函数被调用时也会调用对方的函数。</p>
<p>参考：<br />
作者：Bro__超<br />
地址：https://www.cnblogs.com/heshuchao/p/5376298.html</p>
<div class="hlcode"><pre><span class="kd">class</span> <span class="nc">Calculator</span>
<span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">SuperCalculator</span>
<span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="n">Student</span> <span class="n">xiaoming</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span>
        <span class="n">xiaoming</span><span class="o">.</span><span class="na">fillBlank</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Student</span>
<span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="c1">// TODO Auto-generated constructor stub</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">&quot;unused&quot;</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">calcADD</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>

<span class="c1">//    public void fillBlank(int a, int b)</span>
<span class="c1">//    {</span>
<span class="c1">//        int result = calcADD(a, b);</span>
<span class="c1">//        System.out.println(name + &quot;心算:&quot; + a + &quot; + &quot; + b + &quot; = &quot; + result);</span>
<span class="c1">//    }</span>

<span class="c1">//    private int useCalculator(int a, int b)</span>
<span class="c1">//    {</span>
<span class="c1">//        return new Calculator().add(a, b);</span>
<span class="c1">//    }</span>
<span class="c1">//</span>
<span class="c1">//    public void fillBlank(int a, int b)</span>
<span class="c1">//    {</span>
<span class="c1">//        int result = useCalculator(a, b);</span>
<span class="c1">//        System.out.println(name + &quot;使用计算器:&quot; + a + &quot; + &quot; + b + &quot; = &quot; + result);</span>
<span class="c1">//    }</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">callHelp</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SuperCalculator</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// 类似回调函数</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fillBlank</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="kt">int</span> <span class="n">result</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span> <span class="o">+</span> <span class="s">&quot;求助小红计算:&quot;</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&quot; + &quot;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&quot; = &quot;</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainTest</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="n">Student</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;小明&quot;</span><span class="o">);</span>
        <span class="n">s</span><span class="o">.</span><span class="na">callHelp</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p><code>Student</code>调用了<code>SuperCalculator</code>的<code>add</code>方法, <code>add</code>方法在执行的时候，反过来调用了Studdent的<code>fillBlank</code>方法</p>
<h4 id="_7">异步回调</h4>
<p>一种类似消息或事件的机制，被调用方在函数在收到某种讯息或发生某种事件时，才去调用对方的函数,即通过异步消息进行通知。简单来说，类A的a()函数调用类B的b()函数，但是b()函数很耗时，不确定什么时候执行完毕，如果是同步调用的话会等b()执行完成后才往下执行回调类A中的函数，如果是异步回调的话调用了b()函数，虽然b()函数没有执行完,但仍然继续往下执行，为了完成这点，就需要另开一个线程了。</p>
<p>参考：<br />
作者：O水冰O<br />
来源：CSDN<br />
原文：https://blog.csdn.net/o15277012330o/article/details/79271385</p>
<div class="hlcode"><pre><span class="kd">interface</span> <span class="nc">doJob</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">fillBlank</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="kt">int</span> <span class="n">result</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">SuperCalculator</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="n">doJob</span>  <span class="n">customer</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span>

        <span class="c1">//让线程等待3秒</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">3</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">customer</span><span class="o">.</span><span class="na">fillBlank</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Student</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">DoHomeWork</span> <span class="kd">implements</span> <span class="n">doJob</span> <span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fillBlank</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="kt">int</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span> <span class="o">+</span> <span class="s">&quot;求助小红计算:&quot;</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&quot; + &quot;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&quot; = &quot;</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>
        <span class="o">}</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">callHelp</span> <span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//开启另一个子线程</span>
        <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">new</span> <span class="nf">SuperCalculator</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="k">new</span> <span class="n">DoHomeWork</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">}).</span><span class="na">start</span><span class="o">();</span>

    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Seller</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Seller</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">DoHomeWork</span> <span class="kd">implements</span> <span class="n">doJob</span> <span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fillBlank</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="kt">int</span> <span class="n">result</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span> <span class="o">+</span> <span class="s">&quot;求助小红算账:&quot;</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&quot; + &quot;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&quot; = &quot;</span> <span class="o">+</span> <span class="n">result</span> <span class="o">+</span> <span class="s">&quot;元&quot;</span><span class="o">);</span>
        <span class="o">}</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">callHelp</span> <span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SuperCalculator</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="k">new</span> <span class="n">DoHomeWork</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainTest</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">56</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">31</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">26497</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">11256</span><span class="o">;</span>
        <span class="n">Student</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;小明&quot;</span><span class="o">);</span>
        <span class="n">Seller</span> <span class="n">s2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Seller</span><span class="o">(</span><span class="s">&quot;老婆婆&quot;</span><span class="o">);</span>

        <span class="n">s1</span><span class="o">.</span><span class="na">callHelp</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;/========================1/&quot;</span><span class="o">);</span>
        <span class="n">s2</span><span class="o">.</span><span class="na">callHelp</span><span class="o">(</span><span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;/========================2/&quot;</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/* output, 其中一次的输出如下， 小明的执行耗时，导致回调是迟输出的</span>
<span class="cm">/========================1/</span>
<span class="cm">老婆婆求助小红算账:26497 + 11256 = 37753元</span>
<span class="cm">小明求助小红计算:56 + 31 = 87</span>
<span class="cm">/========================2/</span>
<span class="cm"> */</span>

<span class="cm">/* output, 其中一次的输出如下， 小明的执行耗时，导致回调是迟输出的</span>
<span class="cm">/========================1/</span>
<span class="cm">小明求助小红计算:56 + 31 = 87</span>
<span class="cm">老婆婆求助小红算账:26497 + 11256 = 37753元</span>
<span class="cm">/========================2/</span>
<span class="cm"> */</span>
</pre></div>


<h3 id="_8">事件驱动系统</h3>
<h3 id="_9">内部类标识符</h3>
<p>每个类都会产生<code>.class</code>文件</p>
<p>内部类： 外围类名字 + $ + 内部类但名字</p>
<div class="hlcode"><pre><span class="n">Contents</span><span class="o">.</span><span class="na">class</span>
<span class="n">Destination</span><span class="o">.</span><span class="na">class</span>
<span class="n">Destination2</span><span class="o">.</span><span class="na">class</span>
<span class="n">Goods3$1</span><span class="o">.</span><span class="na">class</span>
<span class="n">Goods3$2</span><span class="o">.</span><span class="na">class</span>
<span class="n">Goods3$3</span><span class="o">.</span><span class="na">class</span>
<span class="n">Goods3</span><span class="o">.</span><span class="na">class</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2019 doctording.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2019-05-25 21:08:07</p>
      </span>
    </div>

    
    
  </body>
</html>
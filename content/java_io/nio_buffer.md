---
title: "Java nio 缓冲区"
layout: page
date: 2019-03-18 00:00
---

[TOC]

# Buffer

## 属性信息

* 容量(Capacity): 缓冲区能够容纳的数据元素的最大数量。这一容量在缓冲区创建时被设定，并且永远不能被改变。

* 上界(Limit): 缓冲区的第一个不能被读或写的元素。或者说，缓冲区中现存元素的计数。

* 位置(Position): 下一个要被读或写的元素的索引。位置会自动由相应的`get()`和`put()`函数更新。

* 标记(Mark): 一个备忘位置。调用`mark()`来设定mark=postion。调用`reset()`设定position=mark。标记在设定前是未定义的(undefined)

`0 <= mark <= position <= limit <= capacity`

## 非线程安全

缓冲区并不是线程安全的。如果您想以多线程同时存取特定的缓冲区，您需要在存取缓冲区之前进行同步(例如对缓冲区对象进行跟踪)

## 两个缓冲区被认为相等的充要条件

* 两个对象类型相同。包含不同数据类型的buffer永远不会相等，而且buffer 绝不会等于非 buffer 对象。

* 两个对象都剩余同样数量的元素。Buffer 的容量不需要相同，而且缓冲区中剩 余数据的索引也不必相同。但每个缓冲区中剩余元素的数目(从位置到上界)必须相同。

* 在每个缓冲区中应被Get()函数返回的剩余数据元素序列必须一致。
